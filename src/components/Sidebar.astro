---
import type { TocItem } from "@/plugins/remark-collect-headings";

const { toc } = Astro.props;
---

<div class="sidebar-wrapper">
    <aside class="sidebar">
        <ul>
            {
                toc.map((heading: TocItem) => {
                    return (
                        <li>
                            <a href={`#${heading.slug}`}>{heading.text}</a>
                        </li>
                    );
                })
            }
        </ul>
    </aside>
</div>

<style lang="scss">
    @use "@/styles/primitives" as *;
    @use "@/styles/semantic" as *;
    @use "@/styles/abstracts/mixins" as *;

    .sidebar-wrapper {
        border-left: 1px solid $color-grey;

        @media screen and (min-width: 768px) {
            position: sticky;
            top: $space-md;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .sidebar {
            @media screen and (min-width: 768px) {
                grid-column: 2 / -1;
                grid-row: 1 / 2;
                width: 250px;
            }

            ul {
                list-style: none;
                padding: 0;
                margin: 0;
                font-size: $fs-sm;
                border-radius: $border-radius;

                a {
                    display: block;
                    @include padding-box;

                    &:hover {
                        background: $color-yellow;
                        color: $color-grey;
                    }
                }
            }
        }
    }
</style>
